# 🎮 콰직 로그라이크 퀴즈 기획서

## 📋 프로젝트 개요

### 프로젝트 명
**콰직 로그라이크 퀴즈 모험** (Kwajik Roguelike Quiz Adventure)

### 핵심 컨셉
기존 실시간 퀴즈 시스템에 RPG 로그라이크 요소를 결합하여, 단순한 문제 풀이를 넘어선 **모험과 성장의 재미**를 제공하는 새로운 퀴즈 활동 모드

### 타겟 사용자
- 기존 콰직 사용자 (교육자, 학습자)
- RPG/로그라이크 게임을 좋아하는 사용자
- 반복 학습에 동기부여가 필요한 학습자
- 게임화된 학습 경험을 원하는 교육자

---

## 🎯 핵심 게임플레이

### 기본 플로우
```
기본 문제 스테이지 → 엘리트 문제 스테이지 → 아이템 스테이지 → 최종 룰렛 스테이지
```

### 게임 진행 방식 (4단계 구조)
1. **📝 기본 문제 스테이지**: 객관식 문제 → 정답 시 기본 점수 획득
2. **⚔️ 엘리트 문제 스테이지**: 주관식 문제 → 정답 시 높은 점수 획득
3. **🎁 아이템 스테이지**: 의견 수집 → 임시 버프 획득 (해당 플레이만 유효)
4. **🎰 최종 룰렛 스테이지**: 활동 보너스 점수 산정 → 추가 점수 획득 룰렛

### 승리/패배 조건
- **문제 정답**: 기본/높은 점수 획득 + 다음 스테이지 진행
- **문제 오답**: 점수 없음 + 다음 스테이지 진행 (게임오버 없음)
- **최종 목표**: 기본 점수 + 활동 보너스 점수로 최고 총점 달성

---

## 🗺️ 스테이지 시스템

### 스테이지 구성 (4가지 타입)

#### 📝 기본 문제 스테이지 (Multiple Choice)
- **문제 형태**: 객관식 (4지선다)
- **문제 수**: 3-5문제 (랜덤)
- **제한시간**: 문제당 60초
- **정답 시**: 기본 점수 (100~300점) 획득
- **오답 시**: 점수 없음 (게임은 계속 진행)

#### ⚔️ 엘리트 문제 스테이지 (Subjective)
- **문제 형태**: 주관식 (단답형/서술형)
- **문제 수**: 1-2문제
- **제한시간**: 문제당 60초
- **정답 시**: 높은 점수 (300~800점) 획득
- **특징**: 더 깊이 있는 사고력 요구

#### 🎁 아이템 스테이지 (Opinion Collection)
- **출현 조건**: 퀴즈 문제 리스트에 의견 수집 문항이 포함된 경우에만 출현
- **중복 방지**: 한 번의 플레이에서 최대 1회만 출현
- **형식**: 의견 수집 문제
- **예시**: "오늘 학습에서 가장 어려웠던 부분은?", "다음에 배우고 싶은 주제는?"
- **보상**: 임시 버프 아이템 1개 획득

#### 🎰 최종 룰렛 스테이지 (Activity Bonus)
- **위치**: 게임 마지막 단계
- **기능**: 활동 보너스 점수 산정 후 추가 점수 획득 룰렛
- **활동 보너스**: 플레이 패턴과 성과에 따른 보너스 점수 계산
- **룰렛 시스템**: 보너스 점수 비례 추가 점수 획득

---

## 🎲 점수 시스템

### 기본 점수 획득
```typescript
// 기본 문제 스테이지 점수
const getBasicScore = () => {
  return Math.floor(Math.random() * 201) + 100; // 100~300점
}

// 엘리트 문제 스테이지 점수
const getEliteScore = () => {
  return Math.floor(Math.random() * 501) + 300; // 300~800점
}
```

### 활동 보너스 점수 계산
```typescript
interface ActivityBonus {
  correctAnswerBonus: number;    // 정답 개수 보너스
  streakBonus: number;          // 연속 정답 보너스
  speedBonus: number;           // 빠른 답변 보너스
  participationBonus: number;   // 의견 참여 보너스
  completionBonus: number;      // 완주 보너스
}

const calculateActivityBonus = (session: GameSession): number => {
  let bonus = 0;
  
  // 정답 개수 보너스 (정답 1개당 50점)
  bonus += session.correctAnswers * 50;
  
  // 연속 정답 보너스 (최대 연속 정답 × 30점)
  bonus += session.maxStreak * 30;
  
  // 빠른 답변 보너스 (평균 답변 시간이 30초 미만일 때)
  if (session.averageAnswerTime < 30) {
    bonus += 200;
  }
  
  // 의견 참여 보너스 (아이템 스테이지 참여 시)
  if (session.participatedInOpinion) {
    bonus += 150;
  }
  
  // 완주 보너스 (모든 스테이지 완료 시)
  if (session.completed) {
    bonus += 300;
  }
  
  return bonus;
}
```

### 최종 룰렛 시스템
```typescript
// 활동 보너스에 따른 룰렛 추가 점수
const getRouletteBonus = (activityBonus: number): number => {
  const multiplier = Math.random() * 2 + 0.5; // 0.5~2.5배 랜덤
  return Math.floor(activityBonus * multiplier);
}

// 최종 점수 계산
const calculateFinalScore = (baseScore: number, activityBonus: number, rouletteBonus: number): number => {
  return baseScore + activityBonus + rouletteBonus;
}
```

---

## 🏆 임시 버프 아이템 시스템

### 아이템 스테이지 보상 (임시 버프)
| 아이템 | 효과 | 지속시간 |
|--------|------|----------|
| 🍀 행운의 클로버 | 다음 기본 점수 +100점 | 1회 사용 |
| ⚡ 번개 부스터 | 다음 엘리트 점수 +200점 | 1회 사용 |
| 🎯 집중력 향상 | 다음 문제 제한시간 +30초 | 1회 사용 |
| 🛡️ 안전망 | 다음 오답 시에도 50점 획득 | 1회 사용 |
| 🔥 열정 버프 | 연속 정답 보너스 2배 | 남은 문제 전체 |

---

## 🎨 UI/UX 디자인

### 전체 테마
- **모험 퀴즈 스타일**: 깔끔하고 직관적인 인터페이스
- **밝은 색감**: 파스텔 톤의 친근한 색상 팔레트
- **진행 상황 시각화**: 스테이지별 진행도를 명확하게 표시

### 주요 화면 구성

#### 1. 기본 문제 스테이지 화면
```
┌─────────────────────────────────────────────────────────┐
│  📝 기본 문제 스테이지  ⏰ 00:45  💰 현재 점수: 650    │
├─────────────────────────────────────────────────────────┤
│  문제 2/4                                               │
│                                                         │
│  다음 중 2 + 3 × 4의 값은?                              │
│                                                         │
│  ⭕ A) 20                                              │
│  ⭕ B) 14                                              │
│  ⭕ C) 10                                              │
│  ⭕ D) 24                                              │
├─────────────────────────────────────────────────────────┤
│  임시 버프: 🍀 행운의 클로버 (+100점 보너스)             │
│  진행도: [📝 완료] → [⚔️ 대기] → [🎁 대기] → [🎰 대기]  │
└─────────────────────────────────────────────────────────┘
```

#### 2. 엘리트 문제 스테이지 화면
```
┌─────────────────────────────────────────────────────────┐
│  ⚔️ 엘리트 문제 스테이지  ⏰ 01:30  💰 현재 점수: 1,250 │
├─────────────────────────────────────────────────────────┤
│  문제 1/2                                               │
│                                                         │
│  다음 방정식을 풀어보세요: 2x² - 8x + 6 = 0             │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 답: x = ________________                        │   │
│  │                                                 │   │
│  └─────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────┤
│  💡 고난이도 주관식 문제입니다. 신중하게 답변해주세요!   │
│  진행도: [📝 완료] → [⚔️ 진행중] → [🎁 대기] → [🎰 대기]│
└─────────────────────────────────────────────────────────┘
```

#### 3. 아이템 스테이지 화면
```
┌─────────────────────────────────────────────────────────┐
│  🎁 아이템 스테이지 - 의견 수집                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  오늘 학습에서 가장 어려웠던 부분은 무엇인가요?          │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 여기에 의견을 작성해주세요...                    │   │
│  │                                                 │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│              [의견 제출하기]                             │
├─────────────────────────────────────────────────────────┤
│  🎁 보상: 임시 버프 아이템 1개 획득!                    │
│                                                         │
│  ┌─────┐  ┌─────┐  ┌─────┐                             │
│  │ 🍀  │  │ ⚡  │  │ 🎯  │                             │
│  │행운의│  │번개 │  │집중력│                             │
│  │클로버│  │부스터│  │향상 │                             │
│  └─────┘  └─────┘  └─────┘                             │
│                                                         │
│              [아이템 선택하기]                           │
└─────────────────────────────────────────────────────────┘
```

#### 4. 최종 룰렛 화면 (활동 보너스)
```
┌─────────────────────────────────────────────────────────┐
│  🎰 최종 룰렛 - 활동 보너스 점수!                       │
├─────────────────────────────────────────────────────────┤
│  📊 활동 보너스 내역:                                   │
│  • 정답 개수 보너스: 6개 × 50점 = 300점                 │
│  • 연속 정답 보너스: 4연속 × 30점 = 120점               │
│  • 빠른 답변 보너스: +200점                             │
│  • 의견 참여 보너스: +150점                             │
│  • 완주 보너스: +300점                                  │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━   │
│  💰 활동 보너스 총합: 1,070점                           │
├─────────────────────────────────────────────────────────┤
│                                                         │
│                🎰 보너스 룰렛 돌리는 중...              │
│                                                         │
│              ┌─────────────────────┐                   │
│              │                     │                   │
│              │    × 1.8배          │                   │
│              │                     │                   │
│              │   +1,926점!         │                   │
│              │                     │                   │
│              └─────────────────────┘                   │
│                                                         │
├─────────────────────────────────────────────────────────┤
│  🎉 최종 결과:                                          │
│  • 기본 점수: 1,850점                                   │
│  • 활동 보너스: 1,070점                                 │
│  • 룰렛 보너스: +1,926점                                │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━   │
│  🏆 총 최종 점수: 4,846점                               │
├─────────────────────────────────────────────────────────┤
│              [결과 저장] [다시 도전]                     │
└─────────────────────────────────────────────────────────┘
```

---

## �� 진행도 및 통계 시스템

### 기존 시스템 차용
- **기본 통계**: 기존 콰직 시스템의 진행도 및 통계 시스템을 그대로 활용
- **점수 기록**: 로그라이크 모드 최종 점수만 기존 시스템에 저장
- **리더보드**: 기존 리더보드 시스템에 로그라이크 모드 카테고리 추가
- **사용자 프로필**: 기존 사용자 프로필에 로그라이크 최고 점수 표시

### 로그라이크 모드 전용 데이터
- **최종 점수만 저장**: 기본 점수 + 활동 보너스 + 룰렛 보너스의 합계
- **플레이 횟수**: 로그라이크 모드 도전 횟수
- **최고 기록**: 개인별 최고 점수 및 달성 일시
- **완주 여부**: 모든 스테이지 완료 여부 (단순 boolean)

### 기존 시스템과의 통합
```typescript
// 기존 사용자 통계에 추가될 필드
interface UserStats {
  // ... 기존 필드들
  roguelike: {
    totalPlays: number;        // 총 플레이 횟수
    highestScore: number;      // 최고 점수
    lastPlayDate: Date;        // 마지막 플레이 일시
    completionCount: number;   // 완주 횟수
  }
}

// 기존 퀴즈 통계에 추가될 필드
interface QuizStats {
  // ... 기존 필드들
  roguelikePlays: number;      // 로그라이크 모드 플레이 횟수
  roguelikeAvgScore: number;   // 로그라이크 모드 평균 점수
}
```

---

## 🚀 구현 로드맵

### Phase 1: 기본 시스템 (3주)
- [ ] 4가지 스테이지 타입 구현
- [ ] 기본/엘리트 문제 출제 시스템
- [ ] 의견 수집 문항 감지 및 아이템 스테이지 조건부 출현
- [ ] 기본 점수 계산 시스템
- [ ] 기본 UI 컴포넌트

### Phase 2: 활동 보너스 시스템 (2주)
- [ ] 활동 보너스 점수 계산 로직
- [ ] 최종 룰렛 시스템 구현
- [ ] 보너스 점수 시각화
- [ ] 기존 통계 시스템과 연동

### Phase 3: 임시 버프 시스템 (2주)
- [ ] 의견 수집 스테이지 구현
- [ ] 임시 버프 아이템 시스템
- [ ] 버프 효과 적용 로직
- [ ] 의견 데이터 수집 (기존 시스템 활용)

### Phase 4: 통계 & 최적화 (2주)
- [ ] 기존 통계 시스템에 로그라이크 데이터 통합
- [ ] 기존 리더보드에 로그라이크 카테고리 추가
- [ ] 성능 최적화
- [ ] 모바일 최적화

---

## 📈 성공 지표 (KPI)

### 기존 지표 활용
- **기존 통계 시스템**: 콰직의 기존 성공 지표 측정 방식 그대로 활용
- **추가 측정 항목**: 로그라이크 모드 관련 최소한의 지표만 추가

### 로그라이크 모드 전용 지표
- **참여율**: 전체 사용자 중 로그라이크 모드 시도 비율
- **재플레이율**: 로그라이크 모드 1회 이상 재도전 비율
- **완주율**: 최종 룰렛까지 완주하는 사용자 비율
- **점수 분포**: 최종 점수의 분포 현황

### 기존 지표에 미치는 영향
- **전체 DAU**: 로그라이크 모드 도입 후 전체 사용자 활동 증가율
- **세션 시간**: 기존 퀴즈 대비 로그라이크 모드의 세션 시간
- **사용자 만족도**: 기존 만족도 조사에 로그라이크 모드 평가 추가

---

## 💡 향후 확장 아이디어

### 기존 시스템 활용 확장
- **기존 이벤트 연동**: 콰직의 기존 이벤트와 로그라이크 모드 연계
- **기존 보상 시스템**: 로그라이크 고득점자에게 기존 보상 시스템 활용
- **기존 소셜 기능**: 친구 시스템, 클래스 기능과 로그라이크 모드 연동
- **기존 알림 시스템**: 기존 알림 채널을 통한 로그라이크 모드 안내

### 최소한의 추가 기능
- **시즌별 테마**: 기존 퀴즈 카테고리를 활용한 테마별 로그라이크
- **랭킹 시스템**: 기존 리더보드를 확장한 로그라이크 전용 랭킹
- **성취 시스템**: 기존 성취/배지 시스템에 로그라이크 성취 추가

---

이 개선된 기획서는 기존 콰직 시스템을 최대한 활용하여 개발 리소스를 절약하면서도, 로그라이크 모드의 핵심 재미는 유지하는 효율적인 접근 방식을 제안합니다.